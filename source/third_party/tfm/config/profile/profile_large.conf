#-------------------------------------------------------------------------------
# Copyright (c) 2023, Arm Limited. All rights reserved.
#
# SPDX-License-Identifier: BSD-3-Clause
#
#-------------------------------------------------------------------------------

# Build
CONFIG_TFM_PROFILE_LARGE=y

# SPM
CONFIG_TFM_ISOLATION_LEVEL=3
CONFIG_CONFIG_TFM_SPM_BACKEND_IPC=y

# Secure partitions
CONFIG_TFM_PARTITION_CRYPTO=y
CONFIG_TFM_PARTITION_INTERNAL_TRUSTED_STORAGE=y
CONFIG_TFM_PARTITION_PLATFORM=y
CONFIG_TFM_PARTITION_PROTECTED_STORAGE=y
CONFIG_TFM_PARTITION_INITIAL_ATTESTATION=y
CONFIG_SYMMETRIC_INITIAL_ATTESTATION=n
CONFIG_TFM_PARTITION_FIRMWARE_UPDATE=n

# Bootloader
CONFIG_MCUBOOT_FIH_PROFILE_MEDIUM=y

# Protected Storage
CONFIG_PS_CRYPTO_AEAD_ALG="PSA_ALG_CCM"

# Mbedcrypto profile
CONFIG_TFM_MBEDCRYPTO_CONFIG_PATH="${CMAKE_SOURCE_DIR}/lib/ext/mbedcrypto/mbedcrypto_config/tfm_mbedcrypto_config_profile_large.h"
CONFIG_TFM_MBEDCRYPTO_PSA_CRYPTO_CONFIG_PATH="${CMAKE_SOURCE_DIR}/lib/ext/mbedcrypto/mbedcrypto_config/crypto_config_profile_large.h"

# TF-M component configs

# Secure Partitions component configs

# Platform partition component configs
CONFIG_PLATFORM_SERVICE_INPUT_BUFFER_SIZE=64
CONFIG_PLATFORM_SERVICE_OUTPUT_BUFFER_SIZE=64
CONFIG_PLATFORM_SP_STACK_SIZE=0x500
CONFIG_PLATFORM_NV_COUNTER_MODULE_DISABLED=n

# Crypto component configs
CONFIG_CRYPTO_ENGINE_BUF_SIZE=0x2380
CONFIG_CRYPTO_CONC_OPER_NUM=8
CONFIG_CRYPTO_RNG_MODULE_ENABLED=y
CONFIG_CRYPTO_KEY_MODULE_ENABLED=y
CONFIG_CRYPTO_AEAD_MODULE_ENABLED=y
CONFIG_CRYPTO_MAC_MODULE_ENABLED=y
CONFIG_CRYPTO_HASH_MODULE_ENABLED=y
CONFIG_CRYPTO_CIPHER_MODULE_ENABLED=y
CONFIG_CRYPTO_ASYM_SIGN_MODULE_ENABLED=y
CONFIG_CRYPTO_ASYM_ENCRYPT_MODULE_ENABLED=y
CONFIG_CRYPTO_KEY_DERIVATION_MODULE_ENABLED=y
CONFIG_CRYPTO_IOVEC_BUFFER_SIZE=5120
CONFIG_CRYPTO_SINGLE_PART_FUNCS_DISABLED=n
CONFIG_CRYPTO_STACK_SIZE=0x1B00

# Attestation component configs
CONFIG_ATTEST_INCLUDE_OPTIONAL_CLAIMS=y
CONFIG_ATTEST_INCLUDE_COSE_KEY_ID=n
CONFIG_ATTEST_STACK_SIZE=0x700
CONFIG_ATTEST_TOKEN_PROFILE_PSA_IOT_1=y

# ITS component configs
CONFIG_ITS_CREATE_FLASH_LAYOUT=y
CONFIG_ITS_RAM_FS=n
CONFIG_ITS_VALIDATE_METADATA_FROM_FLASH=y
CONFIG_ITS_MAX_ASSET_SIZE=512
CONFIG_ITS_BUF_SIZE=512
CONFIG_ITS_NUM_ASSETS=10
CONFIG_ITS_STACK_SIZE=0x720

# PS component configs
CONFIG_PS_CREATE_FLASH_LAYOUT=y
CONFIG_PS_RAM_FS=n
CONFIG_PS_ROLLBACK_PROTECTION=y
CONFIG_PS_VALIDATE_METADATA_FROM_FLASH=y
CONFIG_PS_MAX_ASSET_SIZE=2048
CONFIG_PS_NUM_ASSETS=10
CONFIG_PS_STACK_SIZE=0x700

# TF-M SPM component configs
CONFIG_CONFIG_TFM_CONN_HANDLE_MAX_NUM=8
CONFIG_CONFIG_TFM_DOORBELL_API=y
